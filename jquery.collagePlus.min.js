/*!
 *
 * jQuery collagePlus Plugin v0.0.1
 * https://github.com/ed-lea/jquery-collagePlus
 *
 * Copyright 2012, Ed Lea twitter.com/ed_lea
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 *
 */
(function(a){a.fn.collagePlus=function(b){function d(b,c,d){var e=c-d.albumWidth+d.padding*(b.length-1);var f=Math.floor(e/b.length);var g=0;for(var h=0;h<b.length;h++){var i=b[h][1]-f;var j=typeof fn=="undefined"?Math.round(b[h][2]*(d.albumWidth/c)):j;if(h==b.length-1&&g+i>d.albumWidth&&b.length){i=i-(g+i-d.albumWidth)}g+=i+d.padding;a(b[h][0]).width(i);a(b[h][0]).height(j);if(h<b.length-1){a(b[h][0]).css("padding-right",d.padding+"px")}a(b[h][0]).css("padding-bottom",d.padding+"px");a(b[h][0]).animate({opacity:"1"},{duration:d.fadeSpeed})}}var c=a.extend({targetHeight:400,albumWidth:this.width(),padding:5,images:a("img",a(this)),fadeSpeed:"fast"},b);return this.each(function(){var b=0;var e=[];c.images.each(function(f){var g=a(this).width();var h=a(this).height();var i=Math.ceil(g/h*c.targetHeight);var j=Math.ceil(c.targetHeight);if(i>c.albumWidth){d(e,b,c);delete b;delete e;b=0;e=[]}e.push([this,i,j]);b+=f<e.length-1?i+c.padding:i;if(b>c.albumWidth){d(e,b,c);delete b;delete e;b=0;e=[]}if(c.images.length-1==f&&e.length!=0){d(e,b,c)}})})}})(jQuery)